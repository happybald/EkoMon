<ng-container *ngIf="!location">
    Loading...
</ng-container>

<ng-container *ngIf="location">
    <mat-dialog-content style="display: flex; flex-direction: row; gap: 8px">
        <div style="display: flex; flex-direction: column; flex: 2">
            <span style="font-size: 12px; align-self: center;">{{location.latitude}}, {{location.longitude}}</span>
            <mat-form-field class="denseInput">
                <mat-label>Title</mat-label>
                <input matInput [(ngModel)]="location.title">
            </mat-form-field>
            <mat-form-field class="denseInput">
                <mat-label>Address</mat-label>
                <input matInput [(ngModel)]="location.address">
            </mat-form-field>
            <!-- <mat-form-field class="denseInput">
                 <mat-label>Category</mat-label>
                 <input matInput [(ngModel)]="location.address">
             </mat-form-field>-->
        </div>
        <div style="flex: 3; font-size: 14px; display: flex; flex-direction: column; justify-content: space-between; ">
            <span *ngIf="!location.locationParameters.length">Add some parameters</span>
            <div style="height: 500px; max-width: 100%; overflow: auto;" *ngIf="location.locationParameters.length">
                <table class="mat-table-custom" mat-table [dataSource]="location.locationParameters">
                    <ng-container matColumnDef="parameter.title">
                        <th mat-header-cell *matHeaderCellDef> Parameter</th>
                        <td mat-cell *matCellDef="let element"> {{element.parameter.title}} </td>
                    </ng-container>
                    <ng-container matColumnDef="value">
                        <th mat-header-cell *matHeaderCellDef> Value</th>
                        <td mat-cell *matCellDef="let element"> {{element.value}} </td>
                    </ng-container>
                    <ng-container matColumnDef="parameter.unit.title">
                        <th mat-header-cell *matHeaderCellDef> Unit</th>
                        <td mat-cell style="white-space: nowrap;"
                            *matCellDef="let element"> {{element.parameter.unit?.title ?? "-"}} </td>
                    </ng-container>
                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef></th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-flat-button color="primary" (click)="openLocationParameter(element)">Edit</button>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayColumns;"></tr>
                </table>
            </div>

            <button mat-flat-button color="primary" (click)="addLocationParameter()">Add</button>
            <!--<table>
                <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Unit</th>
                    <th>Value</th>
                </tr>
                <tr *ngFor="let locationParameter of location.locationParameters">
                    <td>{{locationParameter.parameter.title}}</td>
                    <td>{{locationParameter.parameter.unit?.title}}</td>
                    <td>{{locationParameter.value}}</td>
                </tr>
                </thead>
            </table>-->
        </div>
    </mat-dialog-content>
    <mat-dialog-actions style="display: flex; justify-content: space-between; align-items: center; ">
        <button mat-flat-button (click)="close()">Close</button>
        <button mat-flat-button color="primary" (click)="save()">Save</button>
        <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->
        <button mat-flat-button color="warn" (click)="remove()">Delete</button>
    </mat-dialog-actions>
</ng-container>
    